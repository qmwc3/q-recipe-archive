---
layout: null
permalink: /recipe-tags/
---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ page.title }} - {{ site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
</head>
  
<body>
  
  {% include header %}

  <main class="wrap">

    <div id="tag-buttons" class="tags" style="padding: 0 0 15px;"></div>

    <ul id="tag-results" class="recipe-list"></ul>
  
  </main>

  {% include footer %}

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const tagButtons = document.getElementById('tag-buttons');
      const results = document.getElementById('tag-results');
      let recipes = [];
    
      const indexUrl = '{{ "/recipes.json" | relative_url }}';
      const baseUrl = '{{ "/recipe-tags/" | relative_url }}';
    
      fetch(indexUrl)
        .then(r => { if (!r.ok) throw new Error('Fetch failed'); return r.json(); })
        .then(data => {
          recipes = data;
          renderTags();
    
          const params = new URLSearchParams(window.location.search);
          const tag = params.get('tag');
          if(tag) filterByTag(tag);
        })
        .catch(err => console.error('Failed to load recipes.json', err));
    
      function renderTags() {
        const tagSet = new Set();
        recipes.forEach(r => (r.tags || []).forEach(tag => tagSet.add(tag)));
        [...tagSet].sort().forEach(tag => {
          const btn = document.createElement('button');
          btn.className = 'tag';
          btn.textContent = tag;
          btn.type = 'button';
          btn.onclick = () => {
            history.pushState({}, '', baseUrl + '?tag=' + encodeURIComponent(tag));
            filterByTag(tag);
          };
          tagButtons.appendChild(btn);
        });
      }
    
      function filterByTag(tag) {
        results.innerHTML = '';
        recipes.filter(r => (r.tags || []).includes(tag))
               .forEach(r => {
                 const li = document.createElement('li');
                 li.innerHTML = `<a href="${r.url}">${r.title}</a>`;
                 results.appendChild(li);
               });
        highlightActiveTag(tag);
      }
    
      function highlightActiveTag(activeTag) {
        const buttons = tagButtons.querySelectorAll('.tag');
        buttons.forEach(btn => btn.classList.toggle('active', btn.textContent === activeTag));
      }
    
      window.addEventListener('popstate', () => {
        const params = new URLSearchParams(window.location.search);
        const tag = params.get('tag');
        if(tag) filterByTag(tag);
        else results.innerHTML = '';
      });
    });
    </script>
  
</body>
</html>
