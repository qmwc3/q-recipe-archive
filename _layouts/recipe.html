<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ page.title }} - {{ site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
</head>
<body>
  
  {% include header %}

  <main class="wrap recipe">
    <article class="recipe-article">
      <h2 class="recipe-title">{{ page.title }}</h2>

      <div class="meta">
        {% if page.prep_time and page.prep_time != "" %}<span>Prep: {{ page.prep_time }}</span>{% endif %}
        {% if page.cook_time and page.cook_time != "" %}<span>Cook: {{ page.cook_time }}</span>{% endif %}
        {% if page.rest_time and page.rest_time != "" %}<span>Rest: {{ page.rest_time }}</span>{% endif %}
        {% if page.total_time and page.total_time != "" %}<span>Total: {{ page.total_time }}</span>{% endif %}
        {% if page.servings and page.servings != "" %}<span>Servings: {{ page.servings }}</span>{% endif %}
      </div>

      {% if page.photos and page.photos != "" %}
      <div class="photo-gallery">
        {% for photo in page.photos %}
          <figure class="photo">
            <img src="{{ photo.src | relative_url }}" alt="{{ photo.alt | default: page.title }}">
            {% if photo.caption %}<figcaption>{{ photo.caption }}</figcaption>{% endif %}
          </figure>
        {% endfor %}
      </div>
      {% endif %}

      {% if page.description and page.description != "" %}
      <p class="description">{{ page.description }}</p>
      {% endif %}
      
      {% if page.notes and page.notes != "" %}
      <p class="description">Note: {{ page.notes }}</p>
      {% endif %}

      <section class="ingredients">
		<h3>Ingredients</h3>
		<ul class="ingredients-list">
			{% assign optional = nil %}
			{% for ingredient in page.ingredients %}
				{% if ingredient.label %}
					{% assign optional = ingredient %}
				{% else %}
					<li>{{ ingredient }}</li>
				{% endif %}
			{% endfor %}
			{% if optional %}
				<li class="ingredient-header">{{ optional.label }}</li>
				<li class="ingredient-nested">
					<ul>
						{% for item in optional.items %}
							<li>{{ item }}</li>
						{% endfor %}
					</ul>
				</li>
			{% endif %}
		</ul>
		{% endif %}
		{% if page.ingredients_subhead and page.ingredients_subhead != "" %}
		<h3>{{ page.ingredients_subhead }}</h3>
		<ul>
			{% for item in page.ingredients_2 %}
				<li>{{ item }}</li>
			{% endfor %}
		</ul>
		{% endif %}
	</section>
            
      <section class="preparations">
        <h3>Preparations</h3>
        <ul>
          {% for step in page.preparations %}
            <li>{{ step }}</li>
          {% endfor %}
        </ul>
      </section>

      <section class="directions">
		<h3>Directions</h3>
        <ol>
          {% for step in page.directions %}
            <li>{{ step }}</li>
          {% endfor %}
        </ol>
	  </section>
      
      {% if page.pairing and page.pairing != "" %}
      <p class="description">{{ page.pairing }}</p>
      {% endif %}

      {% if page.tags and page.tags != "" %}
      <section class="tags">
        <p>
          {% for tag in page.tags %}
            <a class="tag" href="{{ '/recipe-tags/' | append: tag | relative_url }}">{{ tag }}</a>{% unless forloop.last %}{% endunless %}
          {% endfor %}
        </p>
      </section>
      {% endif %}
      
      {% if page.source_url and page.source_url != "" %}
      <p class="description">Inspired by <a href="{{ page.source_url }}" target="_blank">{{ page.source_name }}</a></p>
      {% endif %}

    </article>
  </main>

  {% include footer %}
  
</body>
</html>
